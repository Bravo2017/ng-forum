!function(e){function r(e,r,o,t,n,i,l,a,c,s){var h=c.getUserInfo(),f=l(t.ref().child("UserAuthInfo").child(h.replyCreatorUID)),u=r(t.ref().child("Topics"));e.precence="",e.timeSinceNoPageOBJ="Not Set",e.timeSinceNoPage="Not",e.currentAuthGetOTHER=t.ref().getAuth(),e.info=c.getUserInfo(),e.otherUserUID=e.info.replyCreatorUID,e.otherUserUsername="",f.$loaded(function(r){e.info=c.getUserInfo(),e.ACTUALinfo=c.ACTUALgetUserInfo(),e.otherUserEmail=e.info.replyCreatorEmail,e.otherUserImage=e.info.replyCreatorAvatar,e.otherUserUID=e.info.replyCreatorUID,e.otherUserUsername=e.info.replyCreatorUsername,e.numFollowing=r.following,e.numFollowers=r.followers,0==e.ACTUALinfo.Moderator?e.otherMod="Not a Moderator":e.otherMod="Respected Moderator",e.otherDesc=e.ACTUALinfo.Description||"This user is silent as the butterflies",e.count=0,u.$loaded(function(r){for(var o=0;o<r.length;o++)r[o].UID==e.otherUserUID&&e.count++}),e.timeSINCEOBJ=l(t.ref()),e.timeSINCEOBJ.$loaded(function(r){var o=r.presence;for(var t in o){var n=e.otherUserUID;e.timeSinceNoPageOBJ=o[n]}});var o=new Firebase("https://uniquecodersforums.firebaseio.com/presence/"+e.otherUserUID);o.once("value",function(r){"Online"==r.val()?e.precence=!0:"Idle"==r.val()?e.precence="Idle":(e.precence=!1,e.timeSinceNoPage=s.getTimeF(new Date(parseInt(r.val()))),console.log(e.timeSinceNoPage))})},function(e){console.error("Error:",e)}),e.hide=function(){n.hide()},e.cancel=function(){n.cancel()},e.answer=function(e){n.hide(e)},e.goToPage=function(){console.log(e.otherUserUsername),i.setID(e.otherUserUID),a.go("authHome.otherUserPage",{USERNAME:e.otherUserUsername})},e.addFolower=function(){e.followerCheck=r(t.ref().child("UserAuthInfo").child(e.otherUserUID)),e.followingCheck=r(t.ref().child("UserAuthInfo").child(e.currentAuthGetOTHER.uid)),e.followerCheck.$loaded(function(r){console.log(r);for(var o=0;o<r.length;o++)"followers"==r[o].$id&&(t.ref().child("UserAuthInfo").child(e.otherUserUID).child("followerLength").update({followers:r[o].$value+1}),t.ref().child("UserAuthInfo").child(e.currentAuthGetOTHER.uid).on("value",function(r){t.ref().child("UserAuthInfo").child(e.otherUserUID).child("followerLength").child("followersInfo").push({UID:e.currentAuthGetOTHER.uid,Username:r.val().Username,Avatar:r.val().Image,Desc:r.val().Description||"The User is Silent as the butterflies..."})}))}),e.followingCheck.$loaded(function(r){console.log(r);for(var o=0;o<r.length;o++)"following"==r[o].$id&&(t.ref().child("UserAuthInfo").child(e.currentAuthGetOTHER.uid).child("followingLength").update({following:r[o].$value+1}),t.ref().child("UserAuthInfo").child(e.otherUserUID).on("value",function(r){t.ref().child("UserAuthInfo").child(e.currentAuthGetOTHER.uid).child("followingLength").child("followingInfo").update({UID:e.currentAuthGetOTHER.uid,Username:r.val().Username,Avatar:r.val().Image,Desc:r.val().Description||"The User is Silent as the butterflies..."})}))})},e.privateMessageStart=function(e,r,o,t){a.go("authHome.privateMes")},e.goToTopic=function(r){a.go("authHome.topic",{AVATAR:e.otherUserImage,DATE:r.DateCreated,EMAIL:e.otherUserEmail,TITLE:r.Title,UID:r.UID,USERNAME:r.Username,VALUE:r.Value})}}var o=e.module("ForumApp");o.controller("otherUserProfileCtrl",["$scope","$firebaseArray","$stateParams","refService","$mdDialog","otherUserProfilePageService","$firebaseObject","$state","otherUserService","timeService",r])}(angular);