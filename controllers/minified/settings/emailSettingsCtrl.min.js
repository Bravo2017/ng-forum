!function(e){function a(e,a,i,r){e.hide=function(){r.hide()},e.cancel=function(){r.cancel()},e.answer=function(e){r.hide(e)},e.changeEmailDialog=function(){var c=e.emailChange||e.emailChange.toString,l=e.emailChangeOld;a.ref().changeEmail({oldEmail:l,newEmail:c,password:e.passwordChangeOld},function(e){if(e)switch(e.code){case"INVALID_PASSWORD":alertify.error("The specified user account password is incorrect.");break;case"INVALID_USER":alertify.error("The specified user account does not exist.");break;default:alertify.error("Error creating user:"+e)}else a.ref().child("UserAuthInfo").child(i.uid).update({Email:c}),alertify.success("User email changed successfully!"),a.ref().child("Topics").once("value",function(e){e.forEach(function(e){var r=(e.key(),e.val());r.UID==i.uid&&a.ref().child("Topics").child(r.pushKey).update({Email:c})})}),a.ref().child("Replies").once("value",function(e){e.forEach(function(e){var r=e.key();e.val();e.forEach(function(e){var l=(e.key(),e.val());l.replyCreatorUID==i.uid&&a.ref().child("Replies").child(r).child(l.pushKey).update({replyCreatorEmail:c})})})}),location.reload(!0),location.reload(!0),r.cancel()})}}var i=e.module("ForumApp");i.controller("emailSettingsCtrl",["$scope","refService","currentAuth","$mdDialog",a])}(angular);