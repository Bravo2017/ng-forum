!function(e){function n(e,n,c,a){e.hide=function(){a.hide()},e.cancel=function(){a.cancel()},e.answer=function(e){a.hide(e)},e.changeUsernameDialog=function(){var r=e.usernameNew;n.ref().child("UserAuthInfo").child(c.uid).update({Username:r}),n.ref().child("Topics").once("value",function(e){e.forEach(function(e){var a=(e.key(),e.val());a.UID==c.uid&&n.ref().child("Topics").child(a.pushKey).update({Username:r})})}),n.ref().child("Replies").once("value",function(e){e.forEach(function(e){var a=e.key();e.val();e.forEach(function(e){var i=(e.key(),e.val());i.replyCreatorUID==c.uid&&n.ref().child("Replies").child(a).child(i.pushKey).update({replyCreatorUsername:r})})})}),location.reload(!0),location.reload(!0),a.cancel()}}var c=e.module("ForumApp");c.controller("usernameChangeCtrl",["$scope","refService","currentAuth","$mdDialog",n])}(angular);